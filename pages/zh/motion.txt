====1,简介====
motion是一款开源软件, 通过实时读取和分析摄像头的视频数据,实现对动态画面的抓拍和录像等功能. motion一旦检测到当前监控画面的像素较前一画面出现了一定量的变化,它就会自动启动抓拍或录像来保存画面,并可激活设置的外部脚本;motion同时可以对画面进行简单处理,比如对动态区域进行加框处理,在画面上附加时间和文字标识等; 当然,motion也可以当作普通的网络监控软件来使用,和mjpeg-streamer相似,可实现简单的流媒体服务功能,在抓拍同时可通过http来观看实时监控画面. motion甚至可以通过pwm来控制马达,实现对动态目标的追踪拍摄.

====2,安装和配置====


====3,配置文件参数项====
/etc/motion.conf配置文件中的其他可调整参数项可参考如下:

1. Daemon 后台模式
Daemon运行模式开/关,pid-file路径.

2. Basic Setup Mode 基本配置模式
是否运行在配置模式, 日志文件, 日志级别, 日志类别过滤

3. 摄像设备选项
视频设备,V4L2文件格式选择,视频输入(video/TV卡或USB摄像头),图像旋转,图像大小,最大幀率,最小抓图间隔, 网络摄像头的URL和用户名密码(user:password),网络连接KEEP-ALIVE设置,
netcam网络服务器设置, netcam_tolerant_check, RTSP应用TCP设置,
自动亮度和亮度调节, 对比度调节, 饱和度调节,色彩度调节.

4. Round Robin轮询设置
每轮帧数,每轮跳帧数, roundrobin噪音过滤.

5. 运动检测设置
门限像素值, 自动门限下调, 噪音等级, 自动噪音门限,
Despeckle降噪滤镜设置,预设检测分区,PGM灵敏度Mask文件, SMART_MASK速度调整
亮度变化敏感度,motion判定连续幀数,motion前摄录幀数,motion后摄录幀数,motion事件间隔
录像文件最长时间,连续存图模式

6.图像输出
图像输出模式,动态像素输出模式,JPEG压缩质量,图像格式(jpeg,ppm)

7. 外部视频编码器设置

8. 快照(Snapshots)间隔时间设置

9. 图片附加文字设置
运动目标加框, 加框样式, 右下侧文字, 左下侧文字,
变化像素值(右上侧), 事件变化标识, 字体双倍大小,
JPEG EXIF描述

10.影像目录和文件名
图片和录像保存路径(base), 快照(snapshots)相对base的保存路径, 激活图片相对base的保存路径

11. 网络选项
ipv6 enable

12. 直播流媒体服务器
端口, jpeg质量, 流播放开/关, 最大幀率, 是否仅连接本地主机,
图像传送数量限制, 认证方式, 用户名和密码设置

13. HTTP基本控制
网络控制端口号, 本机网络控制开/关, html/纯文本方式, 用户名和密码设置

14. 摄像头追踪
追踪模式, 自动追踪开/关,串口号, X轴马达编号, X轴马达反转开/关
y轴马达编号, y轴马达反转开/关, X轴最大值, X轴最小值,
y轴最大值, y轴最小值, X轴中值, y轴中值, ID of an iomojo camera
X轴步进角, y轴步进角, 步进马达速度设置, 最大步进数

15. 外部命令,警告和日志设置
声音报警开/关, 事件开始--激活命令, 事件结束--激活命令, 图片保存--激活命令
运动幀--激活命令, 运动区域--激活命令, 摄像头断开--激活命令

16. 影像环回设备
图片环回设备, 动画环回设备

17. motion线程配置文件